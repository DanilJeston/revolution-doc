---
title: 增加 Mod 资源与为新角色增加立绘
date: 2021-08-28 09:27:07
permalink: /pages/2c0fc6/
---
# 增加 Mod 资源与为新角色增加立绘

今天我们学习的内容会有一点点的难，但是不必担心，按照教程走，你肯定会很快学会。

## 增加 Mod 资源

在模板里的 games 文件夹下，会有一个名叫 `mod_assets` 的文件夹，这里面存放的就是 Mod 资源了。

Mod 资源您可以去[DDMC Community Assets (Google Drive需挂梯)](https://drive.google.com/drive/folders/1yTohcOnGV6Kw6Lru1cITWt-zwRoGSCm_)里查看，那是适合 DDLC Mod 的免费资源

::: danger 警告！！！

**大部分的资源只需要在 Mod里 Credit 一下作者，但某些资源需要获得原作者的准许后才能添加到您的 Mod 里，所以请注意资源的版权问题。**

:::

### 增加图像资源

增加图像资源分为两种：角色图像资源与背景图像资源。

::: warning 注意！！！

角色图像资源的格式必须为png，且背景必须是透明的。

背景图像资源的格式建议为png。

:::



#### 角色图像资源

- 在 `mod_assets` 文件夹下新建一个文件夹，取名为`images`。
- 在 `images` 文件夹下新建一个文件夹，取名为`<角色名>`。
- 现在，您可以在`<角色名>`文件夹里存放您的图像资源了。

::: warning 注意！！！

请根据`<>`里的内容更改。

:::

例如：我现在想要新增一个Sayori的表情。那么我只需要把Sayori额外的表情复制`sayori`文件夹里并重命名为26个字母中的任意一个，现在Sayori的额外的表情在生成Mod时就会被和Mod一并打包了。（后面还需要在`definitions.rpy`文件里定义。）



#### 背景图像资源

- 在 `mod_assets` 文件夹下新建一个文件夹，取名为`images`。
- 在 `images` 文件夹下新建一个文件夹，取名为`bg`。
- 现在，您可以在`bg`文件夹里存放您的图像资源了。

例如：我现在想要新增一个学园祭时的文学社教室背景。那么我只需要把背景复制`bg`文件夹里并重命名为合适的名字，现在额外的背景在生成Mod时就会被和Mod一并打包了。（后面还需要在`definitions.rpy`文件里定义。）



### 增加音频资源

::: warning 注意！！！

Ren'Py只支持以下几种格式：

- Opus
- Ogg Vorbis
- MP3
- WAV (未压缩的有符号16bit型PCM编码格式)

:::

步骤上与增加图像资源基本一致，但有几个地方需要变化：

- 在 `mod_assets` 文件夹下新建一个文件夹，取名为 `audio` 。

- 现在，您可以在 `audio` 文件夹里存放您的音频资源了。

例如：我现在想要增加一首新的背景音乐，那么我只需要把对应的音频加入到 `audio` 文件夹中就可以了。现在新增的音频在生成Mod时就会被和Mod一并打包了。（后面还需要在`definitions.rpy`文件里定义。）



### 定义资源

::: warning 注意！！！

此步是**最重要**的一步，请跟着教程一步步走。如果哪一步出错了，都会导致资源无法使用甚至是 Mod 无法运行！

:::

#### 定义图像资源

定义图像资源分为两种，定义角色图像资源与背景资源。

##### 定义角色图像资源

- 打开 `definitions.rpy` 文件

- <kbd>Ctrl+F</kbd>查找在之前的步骤中的添加的角色资源（例如之前我增加的是 Sayori 的资源，那么在这一步我就<kbd>Ctrl+F</kbd>查找 `Sayori` ）

- 复制一行，在该角色的图像的最底部粘贴（例如我复制了 `image sayori 1 = im.Composite((960, 960), (0, 0), "sayori/1l.png", (0, 0), "sayori/1r.png", (0, 0), "sayori/a.png")`，那么就需要在最后一行，也就是`image sayori 1y = im.Composite((960, 960), (0, 0), "sayori/1l.png", (0, 0), "sayori/1r.png", (0, 0), "sayori/y.png")`的下一行粘贴。 ）

- 按照以下格式更改：

  - 如果是增加表情：

    `image <角色名> <立绘编号> = im.Composite((960, 960), (0,0), "<角色名>/<部分身体1>.png", (0,0), "<角色名>/<部分身体2>.png", (0,0), "mod_assets/images/<角色名>/<表情编号>.png")`

  - 如果是增加身体部分：

    `image <角色名> <立绘编号> = im.Composite((960, 960), (0,0), "mod_assets/images/<角色名>/<部分身体1>.png", (0,0), "mod_assets/images/<角色名>/<部分身体2>.png", (0,0), "<角色名>/<表情编号>.png")`

  - 如果是都增加了:

    `image <角色名> <立绘编号> = im.Composite((960, 960), (0,0), "mod_assets/images/<角色名>/<部分身体1>.png", (0,0), "mod_assets/images/<角色名>/<部分身体2>.png", (0,0), "mod_assets/images/<角色名>/<表情编号>.png")`

  ::: warning 注意！！！

  更改时需要注意以下四点：

  - 所有角色名都是小写
  - 请根据`<>`里的内容更改
  - 立绘编号不能和已有的立绘编号重复
  - 所有图像资源必须存在

  :::

  例如：我之前加入的是Sayori的额外表情，并且把表情命名为了 `a.png` ，那么我就应该更改为：

  `image sayori 1ma = im.Composite((960, 960), (0,0), "sayori/1l.png", (0,0), "sayori/1r.png", (0,0), "mod_assets/images/sayori/a.png")`

  在这里，我把立绘编号取为 `1ma` 而不是 `1a` 就是为了与原版立绘区分（这里的 `m` 指的就是 `mod_assets` ）

  现在，我只需要在脚本里加入 `show sayori 1ma` 就能显示出Sayori的新表情了。

  

  ##### 定义背景资源

  - 打开 `definitions.rpy` 文件

  - <kbd>Ctrl+F</kbd>查找 `# 背景`

  - 复制含有`image`的一行，然后粘贴。

  - 按以下格式更改：

    - 如果格式不为png:

      `image bg <背景名简称> = "mod_assets/images/bg/<包含扩展名的背景名全称>"`

    - 如果格式是png:

      `image bg <背景名简称> = "mod_assets/images/bg/<背景名>.png"`

  ::: warning 注意！！！

  更改时需要注意以下三点：

  - 请根据`<>`里的内容更改
  - 背景名简称不能和已有的背景名简称重复
  - 所有图像资源必须存在

  :::

  例如：我加入的一张学园祭时的文学社背景，且学园祭时的文学社背景名为`clubroom_festival.png`，那么我就应该更改为：

  `image bg clubroom_festival = "mod_assets/images/bg/clubroom_festival.png"`

  现在，我只需要在脚本里加入 `scene clubroom_festival` 就能显示新背景了。

  

  #### 定义音频资源

  定义音频资源就比增加图像资源简单的多了。

  - 打开 `definitions.rpy` 文件

  - <kbd>Ctrl+F</kbd>查找`audio`

  - 复制含有`audio`的一行，然后粘贴。

  - 按以下格式更改：

    `define audio.<音频编号> = "mod_assets/audio/<包含扩展名的音频全程>"`

  ::: warning 注意！！！

  更改时需要注意以下三点：

  - 请根据`<>`里的内容更改
  - 音频编号不能和已有的音频编号重复
  - 所有音频资源必须存在

  :::

  例如：我增加了一首在学园祭时的主题曲，那么我就应该更改为:

  `define audio.tm1 = "mod_assets/audio/xueyuanji.ogg"`

  现在，我只需要在脚本里加入 `play music tm1` 就能播放出新音乐了。

  ::: tip 扩展小知识

  Ren'Py支持节选播放，在官方文档是这样介绍的：

  >  Ren’Py支持节选播放音频文件。节选播放的语法是，在play语句的文件名之前，加上用英文尖括号<>包含的播放起始点。节选播放规范应该包含成对属性名和属性值，并用空格分隔。
  >
  > 属性值以秒为单位，集成在文件名前面的英文尖括号<>内。三种属性名分别为：
  >
  > - `from`
  >
  >   指定播放文件的起始时间点。(默认值为0.0秒)
  >
  > -  `to`
  >
  >   指定播放文件的终止时间点。(默认值为文件结束。)
  >
  > - `loop`
  >
  >   指定需要循环播放的文件起始和终止时间点。(默认的起始时间点为文件开头或 `from` 指定的时间点。)

  例如：我想要让学园祭主题曲在播放完后回到3.55秒，开始循环播放，那么我就可以改为：

  `define audio.tm1 = "<loop 3.55>mod_assets/audio/xueyuanji.ogg"`

  再例如：我只想让学园祭主题曲播放5秒到10秒的内容，那么我就可以改为：

  `define audio.tm1 = "<from 5 to 10>mod_assets/audio/xueyuanji.ogg"`

  :::

  

  ## 为新角色增加立绘

  为新角色增加立绘其实与增加角色图像资源没有太大区别，步骤依然一样：

  - 在 `mod_assets` 文件夹下新建一个文件夹，取名为`images`。
  - 在 `images` 文件夹下新建一个文件夹，取名为`<角色名>`。
  - 现在，您可以在`<角色名>`文件夹里存放您的图像资源了。

  ::: warning 注意！！！

  请根据`<>`里的内容更改。

  :::

  例如：我现在想要新增一个MC的立绘。那么我只需要把MC的立绘复制到`mc`文件夹里，现在MC的立绘在生成Mod时就会被和Mod一并打包了。（后面还需要在`definitions.rpy`文件里定义。）

  

  ### 定义立绘

  - 打开 `definitions.rpy` 文件

  - 滑倒最底部

  - 按照以下格式输入：

    `image <角色名> <立绘编号> = im.Composite((960, 960), (0,0), "mod_assets/images/<角色名>/<部分身体1>.png", (0,0), "mod_assets/images/<角色名>/<部分身体2>.png", (0,0), "mod_assets/images/<角色名>/<表情编号>.png")`

    ::: warning 注意！！！

    更改时需要注意以下四点：

    - 所有角色名都是小写
    - 请根据`<>`里的内容更改
    - 立绘编号不能和已有的立绘编号重复
    - 所有图像资源必须存在

    :::

    例如：我之前加入的是MC的立绘，那么我就应该更改为：

    `image mc 1ma = im.Composite((960, 960), (0,0), "mod_assets/images/mc/1l.png", (0,0), "mod_assets/images/mc/1r.png", (0,0), "mod_assets/images/mc/a.png")`

    在这里，我把立绘编号取为 `1ma` 不取为 `1a` 是同样的道理

    现在，我只需要在脚本里加入 `show mc 1ma` 就能显示出mc的立绘了。